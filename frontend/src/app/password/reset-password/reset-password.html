<div class="reset-container">
  <h2>Réinitialiser le mot de passe</h2>

  <div *ngIf="isLoading">Vérification du lien...</div>

  <div *ngIf="!isLoading && !isValidToken" class="message error">
    {{ error }}
  </div>

  <form *ngIf="!isLoading && isValidToken" [formGroup]="form" (ngSubmit)="onSubmit()">
    <label for="newPassword">Nouveau mot de passe</label>
    <input type="password" id="newPassword" formControlName="newPassword">
    <div class="message" *ngIf="form.get('newPassword')?.invalid && form.get('newPassword')?.touched">
      Le mot de passe doit contenir au moins 6 caractères.
    </div>

    <label for="confirmPassword">Confirmer le mot de passe</label>
    <input type="password" id="confirmPassword" formControlName="confirmPassword">
    <div class="message" *ngIf="form.errors?.['notMatching'] && form.get('confirmPassword')?.touched">
      Les mots de passe ne correspondent pas.
    </div>

    <button type="submit" [disabled]="form.invalid">
      Réinitialiser le mot de passe
    </button>

    <div class="message success" *ngIf="message">
      {{ message }}
    </div>
    <div class="message error" *ngIf="error">
      {{ error }}
    </div>
  </form>
</div>
