
<br><br><br><br><br>
<div class="stages-container">
  <!-- Header avec bouton retour et filtre -->
  <div class="stages-header">
    <button class="back-btn" (click)="goBack()" *ngIf="userRole!=='encadrant'">
      <i class="fas fa-arrow-left"></i> Retour à la liste
    </button>
    
    <div class="filter-container">
      <select class="status-filter" [(ngModel)]="statutFilter" (change)="loadData()">
        <option *ngFor="let option of statutOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
    </div>
  </div>

 

  <!-- État de chargement -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Chargement des stages...</p>
  </div>


<!-- Aucun résultat -->
<div *ngIf="!loading && (
      (statutFilter === 'En cours' && stagesEnCours.length === 0) ||
      (statutFilter === 'Terminé' && stagesTermines.length === 0) ||
      (statutFilter === 'Planifié' && stagesPlanifies.length === 0) ||
      (statutFilter === '' && stages.length === 0)
    )" class="empty-state">
  <i class="fas fa-folder-open empty-icon"></i>
  <h3>Aucun stage trouvé</h3>
  <p>Essayez de modifier le filtre ou vérifiez les critères de recherche.</p>
</div>

  <!-- Liste des stages -->
  <div *ngIf="!loading && stages.length > 0" class="stages-list">
    <div *ngFor="let stage of stages" class="stage-card">
      <div class="stage-main-info">
        <h3 class="stage-title">{{ stage.sujet_stage }}</h3>
        
        <div class="stage-dates">
          <span class="date-item">
            <i class="far fa-calendar-alt"></i> 
            {{ stage.date_debut | date:'dd/MM/yyyy' }}
          </span>
          <span class="date-separator">→</span>
          <span class="date-item">
            <i class="far fa-calendar-alt"></i> 
            {{ stage.date_fin | date:'dd/MM/yyyy' }}
          </span>
        </div>
        
        <span class="stage-status" [ngClass]="{
          'planned': stage.statut_stage === 'Planifié',
          'ongoing': stage.statut_stage === 'En cours',
          'completed': stage.statut_stage === 'Terminé'
        }">
          {{ stage.statut_stage }}
        </span>
      </div>
      
      <div class="stage-secondary-info">
        <div class="intern-info" *ngIf="stage.Stagiaire">
   <!-- Colonne Nom + Email -->
    <div class="intern-column">
      <div class="intern-name">
        <i class="fas fa-user-graduate"></i>
        {{ stage.Stagiaire.prenom }} {{ stage.Stagiaire.nom }}
      </div>
      <div class="intern-email">
        <i class="fas fa-envelope"></i>
        {{ stage.Stagiaire.email }}
      </div>
    </div>

    <!-- Colonne Niveau + Établissement -->
    <div class="intern-column">
      <div class="intern-niveau" *ngIf="stage.Stagiaire.niveau_etudes">
        <i class="fas fa-layer-group"></i>
        {{ stage.Stagiaire.niveau_etudes }}
      </div>
      <div class="intern-etablissement" *ngIf="stage.Stagiaire.etablissement">
        <i class="fas fa-school"></i>
        {{ stage.Stagiaire.etablissement }}
      </div>
    </div>
        </div>
        
        <button class="details-btn" (click)="showDetails(stage.id)">
          <i class="fas fa-eye"></i> Voir détails
        </button>
      </div>
    </div>
  </div>
</div>